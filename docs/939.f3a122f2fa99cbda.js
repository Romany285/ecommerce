"use strict";(self.webpackChunkFreshCart=self.webpackChunkFreshCart||[]).push([[939],{939:(q,l,a)=>{a.r(l),a.d(l,{ForgetpasswordComponent:()=>J});var p=a(6814),n=a(95),t=a(4769),m=a(9862);let c=(()=>{class o{constructor(s){this._HttpClient=s,this.baseUrl="https://ecommerce.routemisr.com"}forgetPassword(s){return this._HttpClient.post(this.baseUrl+"/api/v1/auth/forgotPasswords",s)}resetCode(s){return this._HttpClient.post(this.baseUrl+"/api/v1/auth/verifyResetCode",s)}resetPassword(s){return this._HttpClient.put(this.baseUrl+"/api/v1/auth/resetPassword",s)}static#t=this.\u0275fac=function(e){return new(e||o)(t.LFG(m.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var u=a(1120);function g(o,i){1&o&&(t.TgZ(0,"p",11),t._uU(1,"Email is Required"),t.qZA())}function _(o,i){1&o&&(t.TgZ(0,"p",11),t._uU(1,"Email invalid"),t.qZA())}function d(o,i){if(1&o&&(t.TgZ(0,"div",9),t.YNc(1,g,2,0,"p",10),t.YNc(2,_,2,0,"p",10),t.qZA()),2&o){const s=t.oxw(2);let e,r;t.xp6(1),t.Q6J("ngIf",null==(e=s.forgetForm.get("email"))?null:e.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(r=s.forgetForm.get("email"))?null:r.getError("email"))}}function f(o,i){if(1&o&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&o){const s=t.oxw(2);t.xp6(1),t.hij(" ",s.userMsg," ")}}function w(o,i){if(1&o){const s=t.EpF();t.TgZ(0,"section",1)(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.forgetPassword())}),t.TgZ(2,"label",3),t._uU(3,"Email"),t.qZA(),t._UZ(4,"input",4,5),t.YNc(6,d,3,2,"div",6),t.TgZ(7,"button",7),t._uU(8," Forget Password"),t.qZA(),t.YNc(9,f,2,1,"p",8),t.qZA()()}if(2&o){const s=t.MAs(5),e=t.oxw();let r;t.xp6(1),t.Q6J("formGroup",e.forgetForm),t.xp6(5),t.Q6J("ngIf",(null==(r=e.forgetForm.get("email"))?null:r.errors)&&((null==(r=e.forgetForm.get("email"))?null:r.touched)||s.value.length>0)),t.xp6(1),t.Q6J("disabled",e.forgetForm.invalid),t.xp6(2),t.Q6J("ngIf",e.userMsg)}}function h(o,i){1&o&&(t.TgZ(0,"p",11),t._uU(1,"reset is Required"),t.qZA())}function x(o,i){if(1&o&&(t.TgZ(0,"div",9),t.YNc(1,h,2,0,"p",10),t.qZA()),2&o){const s=t.oxw(2);let e;t.xp6(1),t.Q6J("ngIf",null==(e=s.resetForm.get("reset"))?null:e.getError("required"))}}function F(o,i){if(1&o&&(t.TgZ(0,"p",17),t._uU(1),t.qZA()),2&o){const s=t.oxw(2);t.xp6(1),t.hij(" ",s.userMsg," ")}}function C(o,i){if(1&o){const s=t.EpF();t.TgZ(0,"section",1)(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.resetCode())}),t.TgZ(2,"label",13),t._uU(3,"Reset Code"),t.qZA(),t._UZ(4,"input",14,15),t.YNc(6,x,2,1,"div",6),t.TgZ(7,"button",7),t._uU(8,"Reset Code"),t.qZA(),t.YNc(9,F,2,1,"p",16),t.qZA()()}if(2&o){const s=t.MAs(5),e=t.oxw();let r;t.xp6(1),t.Q6J("formGroup",e.resetForm),t.xp6(5),t.Q6J("ngIf",(null==(r=e.resetForm.get("reset"))?null:r.errors)&&((null==(r=e.resetForm.get("reset"))?null:r.touched)||s.value.length>0)),t.xp6(1),t.Q6J("disabled",e.resetForm.invalid),t.xp6(2),t.Q6J("ngIf",e.userMsg)}}function Z(o,i){1&o&&(t.TgZ(0,"p",11),t._uU(1,"Password is Required"),t.qZA())}function v(o,i){1&o&&(t.TgZ(0,"p",11),t._uU(1,"must be at least 6 chars"),t.qZA())}function T(o,i){if(1&o&&(t.TgZ(0,"div",9),t.YNc(1,Z,2,0,"p",10),t.YNc(2,v,2,0,"p",10),t.qZA()),2&o){const s=t.oxw(2);let e,r;t.xp6(1),t.Q6J("ngIf",null==(e=s.newPassForm.get("password"))?null:e.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(r=s.newPassForm.get("password"))?null:r.getError("pattern"))}}function b(o,i){if(1&o&&(t.TgZ(0,"p",17),t._uU(1),t.qZA()),2&o){const s=t.oxw(2);t.xp6(1),t.hij(" ",s.userMsg," ")}}function I(o,i){if(1&o){const s=t.EpF();t.TgZ(0,"section",1)(1,"form",2),t.NdJ("ngSubmit",function(){t.CHM(s);const r=t.oxw();return t.KtG(r.newPassword())}),t.TgZ(2,"label",18),t._uU(3,"New Password"),t.qZA(),t._UZ(4,"input",19,20),t.YNc(6,T,3,2,"div",6),t.TgZ(7,"button",7),t._uU(8,"Reset Code"),t.qZA(),t.YNc(9,b,2,1,"p",16),t.qZA()()}if(2&o){const s=t.MAs(5),e=t.oxw();let r;t.xp6(1),t.Q6J("formGroup",e.newPassForm),t.xp6(5),t.Q6J("ngIf",(null==(r=e.newPassForm.get("password"))?null:r.errors)&&((null==(r=e.newPassForm.get("password"))?null:r.touched)||s.value.length>0)),t.xp6(1),t.Q6J("disabled",e.newPassForm.invalid),t.xp6(2),t.Q6J("ngIf",e.userMsg)}}let J=(()=>{class o{constructor(s,e,r){this._FormBuilder=s,this._ForgetpassService=e,this._Router=r,this.step1=!0,this.step2=!1,this.step3=!1,this.email="",this.userMsg="",this.forgetForm=this._FormBuilder.group({email:["",[n.kI.required,n.kI.email]]}),this.resetForm=this._FormBuilder.group({reset:["",n.kI.required]}),this.newPassForm=this._FormBuilder.group({password:["",[n.kI.required,n.kI.pattern(/^\w{6,}$/)]]})}forgetPassword(){let s=this.forgetForm.value;this.email=s.email,this._ForgetpassService.forgetPassword(s).subscribe({next:e=>{console.log(e),this.userMsg=e.message,this.step1=!1,this.step2=!0},error:e=>{this.userMsg=e.error.message,console.log(e)}})}resetCode(){console.log(this.resetForm.value),this._ForgetpassService.resetCode(this.resetForm.value).subscribe({next:e=>{this.userMsg=e.status,this.step2=!1,this.step3=!0,console.log(e)},error:e=>{this.userMsg=e.error.message,console.log(e)}})}newPassword(){let s=this.resetForm.value;s.email=this.email,this._ForgetpassService.resetPassword(s).subscribe({next:e=>{e.token&&(localStorage.setItem("etoken",e.token),this._Router.navigate(["/home"])),console.log(e)},error:e=>{this.userMsg=e.error.message,console.log(e)}})}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(n.qu),t.Y36(c),t.Y36(u.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-forgetpassword"]],standalone:!0,features:[t.jDz],decls:3,vars:3,consts:[["class","w-50 mx-auto rounded shadow bg-main-light p-3 mt-4 py-4",4,"ngIf"],[1,"w-50","mx-auto","rounded","shadow","bg-main-light","p-3","mt-4","py-4"],[3,"formGroup","ngSubmit"],["for","email"],["type","email","id","email","placeholder","Enter Your Email...","formControlName","email",1,"form-control"],["emailInput",""],["class","alert alert-danger p-1 font-md",4,"ngIf"],[1,"main-btn","w-100","mt-3",3,"disabled"],["class","alert alert-secondary text-center mt-2 w-75 mx-auto p-1 mb-0",4,"ngIf"],[1,"alert","alert-danger","p-1","font-md"],["class","mb-0 p-1",4,"ngIf"],[1,"mb-0","p-1"],[1,"alert","alert-secondary","text-center","mt-2","w-75","mx-auto","p-1","mb-0"],["for","reset"],["type","text","id","reset","placeholder","Enter Reset Code...","formControlName","reset",1,"form-control"],["resetInput",""],["class","alert alert-secondary mt-2 text-center w-75 mx-auto p-1 mb-0",4,"ngIf"],[1,"alert","alert-secondary","mt-2","text-center","w-75","mx-auto","p-1","mb-0"],["for","newPass"],["type","text","id","newPass","placeholder","Enter New Password...","formControlName","password",1,"form-control"],["passwordInput",""]],template:function(e,r){1&e&&(t.YNc(0,w,10,4,"section",0),t.YNc(1,C,10,4,"section",0),t.YNc(2,I,10,4,"section",0)),2&e&&(t.Q6J("ngIf",r.step1),t.xp6(1),t.Q6J("ngIf",r.step2),t.xp6(1),t.Q6J("ngIf",r.step3))},dependencies:[p.ez,p.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:["[_ngcontent-%COMP%]::placeholder{font-size:14px}"]})}return o})()}}]);