"use strict";(self.webpackChunkFreshCart=self.webpackChunkFreshCart||[]).push([[177],{5177:(v,p,i)=>{i.r(p),i.d(p,{PaymentComponent:()=>A});var d=i(6814),o=i(95),t=i(4769),g=i(1120),a=i(6286);function C(e,u){1&e&&(t.TgZ(0,"p",15),t._uU(1,"details is required"),t.qZA())}function s(e,u){1&e&&(t.TgZ(0,"p",15),t._uU(1,"details min length is 3"),t.qZA())}function _(e,u){if(1&e&&(t.TgZ(0,"div",13),t.YNc(1,C,2,0,"p",14),t.YNc(2,s,2,0,"p",14),t.qZA()),2&e){const r=t.oxw();let l,n;t.xp6(1),t.Q6J("ngIf",null==(l=r.orderForm.get("details"))?null:l.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(n=r.orderForm.get("details"))?null:n.getError("minlength"))}}function y(e,u){1&e&&(t.TgZ(0,"p",15),t._uU(1,"phone is required"),t.qZA())}function I(e,u){1&e&&(t.TgZ(0,"p",15),t._uU(1,"phone invalid"),t.qZA())}function P(e,u){if(1&e&&(t.TgZ(0,"div",13),t.YNc(1,y,2,0,"p",14),t.YNc(2,I,2,0,"p",14),t.qZA()),2&e){const r=t.oxw();let l,n;t.xp6(1),t.Q6J("ngIf",null==(l=r.orderForm.get("phone"))?null:l.getError("required")),t.xp6(1),t.Q6J("ngIf",null==(n=r.orderForm.get("phone"))?null:n.getError("pattern"))}}function T(e,u){1&e&&(t.TgZ(0,"p",15),t._uU(1,"city is required"),t.qZA())}function Z(e,u){if(1&e&&(t.TgZ(0,"div",13),t.YNc(1,T,2,0,"p",14),t.qZA()),2&e){const r=t.oxw();let l;t.xp6(1),t.Q6J("ngIf",null==(l=r.orderForm.get("city"))?null:l.getError("required"))}}let A=(()=>{class e{constructor(r,l,n){this._ActivatedRoute=r,this._FormBuilder=l,this._CartService=n,this.orderForm=this._FormBuilder.group({details:["",[o.kI.required,o.kI.minLength(3)]],phone:["",[o.kI.required,o.kI.pattern(/^01[0125][0-9]{8}$/)]],city:["",o.kI.required]})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:r=>{this.cartId=r.get("id"),console.log(this.cartId)}})}handleForm(){this.orderForm.valid&&this._CartService.checkOut(this.cartId,this.orderForm.value).subscribe({next:r=>{"success"==r.status&&window.open(r.session.url,"_self"),console.log(r)},error:r=>{console.log(r)}})}static#t=this.\u0275fac=function(l){return new(l||e)(t.Y36(g.gz),t.Y36(o.qu),t.Y36(a.N))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-payment"]],standalone:!0,features:[t.jDz],decls:22,vars:5,consts:[[1,"w-75","mx-auto","my-5","shadow","p-4","fw-medium",3,"formGroup","submit"],[1,"my-3"],["for","details"],["type","text","id","details","placeholder","details...","formControlName","details",1,"form-control"],["detailsInput",""],["class","alert alert-danger",4,"ngIf"],["for","phone"],["type","tel","id","phone","placeholder","enter your phone...","formControlName","phone",1,"form-control"],["phoneInput",""],["for","city"],["type","text","id","city","placeholder","enter your city...","formControlName","city",1,"form-control"],["cityInput",""],[1,"btn-outline-info","btn","w-100","py-1","rounded",3,"disabled"],[1,"alert","alert-danger"],["class","p-0 m-0 font-md",4,"ngIf"],[1,"p-0","m-0","font-md"]],template:function(l,n){if(1&l&&(t.TgZ(0,"section",0),t.NdJ("submit",function(){return n.handleForm()}),t.TgZ(1,"form")(2,"div",1)(3,"label",2),t._uU(4,"Details"),t.qZA(),t._UZ(5,"input",3,4),t.YNc(7,_,3,2,"div",5),t.qZA(),t.TgZ(8,"div",1)(9,"label",6),t._uU(10,"Phone"),t.qZA(),t._UZ(11,"input",7,8),t.YNc(13,P,3,2,"div",5),t.qZA(),t.TgZ(14,"div",1)(15,"label",9),t._uU(16,"City"),t.qZA(),t._UZ(17,"input",10,11),t.YNc(19,Z,2,1,"div",5),t.qZA(),t.TgZ(20,"button",12),t._uU(21,"Pay Now"),t.qZA()()()),2&l){const f=t.MAs(6),E=t.MAs(12),U=t.MAs(18);let c,m,h;t.Q6J("formGroup",n.orderForm),t.xp6(7),t.Q6J("ngIf",(null==(c=n.orderForm.get("details"))?null:c.errors)&&((null==(c=n.orderForm.get("details"))?null:c.touched)||f.value.length>0)),t.xp6(6),t.Q6J("ngIf",(null==(m=n.orderForm.get("phone"))?null:m.errors)&&((null==(m=n.orderForm.get("phone"))?null:m.touched)||E.value.length>0)),t.xp6(6),t.Q6J("ngIf",(null==(h=n.orderForm.get("city"))?null:h.errors)&&((null==(h=n.orderForm.get("city"))?null:h.touched)||U.value.length>0)),t.xp6(1),t.Q6J("disabled",n.orderForm.invalid)}},dependencies:[d.ez,d.O5,o.UX,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:["[_ngcontent-%COMP%]::placeholder{font-size:14px}.btn[_ngcontent-%COMP%]:hover{color:#fff}"]})}return e})()},6286:(v,p,i)=>{i.d(p,{N:()=>g});var d=i(5619),o=i(4769),t=i(9862);let g=(()=>{class a{constructor(s){this._HttpClient=s,this.baseUrl="https://ecommerce.routemisr.com",this.cartNumber=new d.X(0)}addProductToCart(s){return this._HttpClient.post(this.baseUrl+"/api/v1/cart",{productId:s})}getUserCart(){return this._HttpClient.get(this.baseUrl+"/api/v1/cart")}removeItem(s){return this._HttpClient.delete(this.baseUrl+`/api/v1/cart/${s}`)}updateItem(s,_){return this._HttpClient.put(this.baseUrl+`/api/v1/cart/${s}`,{count:_})}removeCart(){return this._HttpClient.delete(this.baseUrl+"/api/v1/cart")}checkOut(s,_){return this._HttpClient.post(this.baseUrl+`/api/v1/orders/checkout-session/${s}?url=http://localhost:4200`,{shippingAddress:_})}static#t=this.\u0275fac=function(_){return new(_||a)(o.LFG(t.eN))};static#e=this.\u0275prov=o.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);